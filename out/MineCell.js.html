<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: MineCell.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: MineCell.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
/**
 * MineCell class
 * @constructor MineCell
 * 
 */
class MineCell{
  constructor(i, j, w){
    this.i = i;
    this.j = j;
    this.x = (i * w);
    this.y = (j * w);
    this.w = w;
    this.neighborCount = 0;
    
    this.mine = false;
    this.revealed = false;
    this.isFlag = false
    this.gameOver = false
    this.neighborFlags = 0
    this.neighbourCells = []
    
    this.revealedCount = 0
    this.flagCount = 0
    this.textOffsetX = 0
    this.textOffsetY = 0
    
    this.mineOffsetX = 0
    this.mineOffsetY = 0
  }
  
    /** Renders the minefield every frame. */
    show() {
        stroke(0);
        noFill();
        this.makeShape()
        if (this.revealed) {
            if (this.mine) {
                fill(127);
                ellipse(this.x + this.mineOffsetX, this.y + this.mineOffsetY, this.w * 0.5);
            } 
            else {
                fill(200);
                this.makeShape()
                if (this.neighborCount > 0) {
                    textAlign(CENTER);
                    fill(0);
                    text(this.neighborCount, this.x + this.textOffsetX, this.y + this.textOffsetY);
                }
            }
        }
    }
  
  /** reveals the cell */
  reveal() {
    if(!this.revealed){
      game.revealedCount += 1
      console.log(this.neighbourCells)
    }
    this.revealed = true;
    
    if (this.mine &amp;&amp; !this.isFlag &amp;&amp; !game.firstMousePress){
      this.gameOver = true
    }
    if (this.neighborCount == 0) {
        this.floodFill();
    }
  }
  
  /** Renders the flag */
  flag(){
    if(this.isFlag){
          stroke(0);
          fill('red');
          this.makeShape()
    }
  }
  
  /** Places a flag */
  makeFlag(){
        if(this.isFlag == true){
          this.isFlag = false
          game.flagCount -= 1
          if(this.mine){
            console.log("correct, removing flag")
            game.correctFlagCount -= 1
          }
        }
        else{
          if(this.mine){
            console.log("correct flag")
            game.correctFlagCount += 1
          }
          this.isFlag = true
          game.flagCount += 1
        }
  }  
  
  /** Flood fill the surrounding solved cells */
  floodFill() {
    for(var i = 0; i &lt; this.neighbourCells.length; i++){
      var neighbor = this.neighbourCells[i];
      if(neighbor != undefined){
        if (!neighbor.revealed &amp;&amp; !neighbor.isFlag) {
          neighbor.reveal();
        }
      }
    } 
  }
  
  
  /** Flood fill the solved mines */
  revealSolved() {
    var neighbourFlags = 0  
    for(var i = 0; i &lt; this.neighbourCells.length; i++){
      var neighbor = this.neighbourCells[i];
      if(neighbor != undefined){
        if(neighbor.isFlag){
            neighbourFlags += 1
        }
      }
    }
    for(var i = 0; i &lt; this.neighbourCells.length; i++){
      var neighbor = this.neighbourCells[i];
      if(neighbor != undefined){
        if (!neighbor.revealed &amp;&amp; neighbourFlags == this.neighborCount &amp;&amp; !neighbor.isFlag) {
          neighbor.reveal();
        }
      }
    }
  }
  
  /** Check to see if a mine has been revealed */
  gameOverCheck(){
    return this.gameOver
  }  
  
  
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ClassicCell.html">ClassicCell</a></li><li><a href="ColourCell.html">ColourCell</a></li><li><a href="Game.html">Game</a></li><li><a href="GameTimer.html">GameTimer</a></li><li><a href="HexCell.html">HexCell</a></li><li><a href="MineCell.html">MineCell</a></li><li><a href="Minesweeper.html">Minesweeper</a></li><li><a href="Scores.html">Scores</a></li><li><a href="Sketch.html">Sketch</a></li></ul><h3>Global</h3><ul><li><a href="global.html#doubleClicked">doubleClicked</a></li><li><a href="global.html#mousePressed">mousePressed</a></li><li><a href="global.html#new_game">new_game</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Oct 04 2018 07:41:32 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
